<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>برنامج اللياقة البدنية المتكامل</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- FontAwesome 6 Pro (نسخة مجانية وموثوقة عبر CDN) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts: Cairo -->
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #10b981 0%, #059669 100%);
            --card-gradient: linear-gradient(145deg, #ffffff, #f3f4f6);
        }
        body {
            font-family: 'Cairo', sans-serif;
            background-color: #f0f2f5;
            background-image: radial-gradient(#e5e7eb 1px, transparent 1px);
            background-size: 20px 20px;
        }
        
        /* Animations */
        .fade-up { animation: fadeUp 0.5s cubic-bezier(0.16, 1, 0.3, 1); }
        @keyframes fadeUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Tabs Styling */
        .tab-btn {
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        .tab-btn.active {
            background: var(--primary-gradient);
            color: white;
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.4);
            border: none;
        }
        .tab-btn.inactive {
            background: white;
            color: #4b5563;
            border: 1px solid #e5e7eb;
        }
        .tab-btn.inactive:hover {
            background: #f9fafb;
            border-color: #10b981;
            color: #10b981;
        }

        /* Custom Scrollbar */
        .hide-scroll::-webkit-scrollbar { display: none; }
        .hide-scroll { -ms-overflow-style: none; scrollbar-width: none; }

        /* Modal Styles */
        .glass-effect {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
        }
        .modal {
            transition: all 0.3s ease;
            opacity: 0;
            visibility: hidden;
            z-index: 1000;
        }
        .modal.open {
            opacity: 1;
            visibility: visible;
        }
        .modal-scale {
            transform: scale(0.9);
            transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        .modal.open .modal-scale {
            transform: scale(1);
        }
    </style>
</head>
<body class="text-gray-800 antialiased pb-12">

    <!-- Navbar / Header -->
    <header class="bg-white shadow-sm border-b border-gray-100 sticky top-0 z-40">
        <div class="container mx-auto px-4 py-4 flex justify-between items-center">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 rounded-xl bg-emerald-100 flex items-center justify-center text-emerald-600 shadow-sm">
                    <i class="fa-solid fa-dumbbell text-xl"></i>
                </div>
                <div>
                    <h1 class="text-xl font-bold text-gray-800 leading-tight">جدول اللياقة</h1>
                    <p class="text-xs text-gray-500 font-medium">خطتك الأسبوعية المتكاملة</p>
                </div>
            </div>
            <button class="bg-gray-100 hover:bg-gray-200 text-gray-600 w-10 h-10 rounded-full flex items-center justify-center transition-colors">
                <i class="fa-solid fa-user"></i>
            </button>
        </div>
    </header>

    <main class="container mx-auto px-4 mt-8">
        
        <!-- Tabs Navigation -->
        <div class="relative mb-8">
            <div class="tabs-container flex overflow-x-auto gap-3 py-2 hide-scroll snap-x">
                <!-- Tabs injected by JS -->
            </div>
            <!-- Fade effect on sides for scroll indication -->
            <div class="absolute left-0 top-0 bottom-0 w-8 bg-gradient-to-r from-[#f0f2f5] to-transparent pointer-events-none"></div>
            <div class="absolute right-0 top-0 bottom-0 w-8 bg-gradient-to-l from-[#f0f2f5] to-transparent pointer-events-none"></div>
        </div>

        <!-- Main Content Area -->
        <div id="day-content" class="min-h-[60vh]">
            <!-- Content injected by JS -->
        </div>

    </main>

    <!-- Video Modal -->
    <div id="videoModal" class="modal fixed inset-0 flex items-center justify-center bg-gray-900/90 backdrop-blur-sm p-4">
        <div class="modal-scale w-full max-w-4xl bg-white rounded-2xl shadow-2xl overflow-hidden flex flex-col relative">
            
            <!-- Modal Header -->
            <div class="px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-gray-50">
                <h3 id="modalTitle" class="font-bold text-lg text-gray-800 pr-2 border-r-4 border-emerald-500">
                    عنوان التمرين
                </h3>
                <button id="closeModalBtn" class="w-8 h-8 rounded-full bg-white border border-gray-200 text-gray-500 hover:text-red-500 hover:border-red-500 flex items-center justify-center transition-all shadow-sm">
                    <i class="fa-solid fa-times"></i>
                </button>
            </div>

            <!-- Video Area -->
            <div class="relative pt-[56.25%] bg-black">
                <iframe id="videoFrame" class="absolute inset-0 w-full h-full" src="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>

            <!-- YouTube Button Area -->
            <div class="bg-gray-50 border-t border-gray-200 py-4 flex justify-center">
                <a id="fallbackLink" href="#" target="_blank" class="bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-full font-bold shadow-lg transition-all duration-300 flex items-center gap-2">
                    <i class="fa-brands fa-youtube"></i> فتح في يوتيوب
                </a>
            </div>

            <!-- Modal Footer -->
            <div class="px-6 py-4 bg-gray-50 text-sm text-gray-500 flex justify-between items-center">
                <span><i class="fa-solid fa-circle-info text-blue-500 ms-1"></i> اضغط خارج الصندوق للإغلاق</span>
            </div>
        </div>
    </div>

    <!-- JavaScript Logic -->
    <script>
        // --- Data Configuration (Preserved Data, Updated Icons) ---
        const workoutData = [
            {
                day: "اليوم 1",
                burn: "250–300",
                meals: { b: 350, l: 450, d: 800, note: "(أكبر وجبة)" },
                exercises: [
                    { name: "سكوات (Squat)", reps: "3 جولات × 15 عدة", link: "https://www.youtube.com/watch?v=YaXPRqUwItQ", icon: "fa-person-running", color: "text-blue-500", bg: "bg-blue-50" },
                    { name: "لانجز (Lunges)", reps: "3 جولات × 12 عدة", link: "https://www.youtube.com/watch?v=QOVaHwm-Q6U", icon: "fa-walking", color: "text-indigo-500", bg: "bg-indigo-50" },
                    { name: "بلانك (Plank)", reps: "3 جولات × 30 ثانية", link: "https://www.youtube.com/watch?v=pSHjTRCQxIw", icon: "fa-stopwatch", color: "text-emerald-500", bg: "bg-emerald-50" },
                    { name: "تسلق الجبل", reps: "3 جولات × 20 عدة", link: "https://www.youtube.com/watch?v=nmwgirgXLYM", icon: "fa-mountain", color: "text-orange-500", bg: "bg-orange-50" },
                    { name: "نط الحبل", reps: "حسب الاستطاعة", link: "https://www.youtube.com/watch?v=u3zgHI8QnqE", icon: "fa-wind", color: "text-cyan-500", bg: "bg-cyan-50" }
                ]
            },
            {
                day: "اليوم 2",
                burn: "220–300",
                meals: { b: 300, l: 450, d: 850, note: "" },
                exercises: [
                    { name: "ضغط (Push-up)", reps: "3 جولات × أقصى عدد", link: "https://www.youtube.com/watch?v=IODxDxX7oi4", icon: "fa-hand-fist", color: "text-red-500", bg: "bg-red-50" },
                    { name: "متوازي كرسي", reps: "3 جولات × 12 عدة", link: "https://www.youtube.com/watch?v=0326dy_-CzM", icon: "fa-chair", color: "text-purple-500", bg: "bg-purple-50" },
                    { name: "بلانك جانبي", reps: "يمين/شمال", link: "https://www.youtube.com/watch?v=nxwkZBYS5H0", icon: "fa-arrows-left-right", color: "text-emerald-500", bg: "bg-emerald-50" },
                    { name: "بيربيز (Burpees)", reps: "3 جولات × 10 عدات", link: "https://www.youtube.com/watch?v=auBLP0dSuy4", icon: "fa-fire", color: "text-orange-600", bg: "bg-orange-50" },
                    { name: "نط الحبل", reps: "تدريب خفيف", link: "https://www.youtube.com/watch?v=u3zgHI8QnqE", icon: "fa-wind", color: "text-cyan-500", bg: "bg-cyan-50" }
                ]
            },
            {
                day: "اليوم 3",
                burn: "300–350",
                meals: { b: 350, l: 400, d: 850, note: "" },
                exercises: [
                    { name: "نط الحبل (HIIT)", reps: "6 جولات × 45 ثانية", link: "https://www.youtube.com/watch?v=hcuv6F05H60", icon: "fa-bolt", color: "text-yellow-500", bg: "bg-yellow-50" },
                    { name: "قفز الحواجز", reps: "تمرين كامل", link: "https://www.youtube.com/watch?v=iSSAk4XCsRA", icon: "fa-person-running", color: "text-blue-500", bg: "bg-blue-50" },
                    { name: "رفع الركبتين", reps: "تمرين كامل", link: "https://www.youtube.com/watch?v=Zk8Z0h55Wk4", icon: "fa-running", color: "text-indigo-500", bg: "bg-indigo-50" },
                    { name: "بلانك", reps: "40 ثانية", link: "https://www.youtube.com/watch?v=pSHjTRCQxIw", icon: "fa-stopwatch", color: "text-emerald-500", bg: "bg-emerald-50" }
                ]
            },
            {
                day: "اليوم 4",
                subtitle: "راحة خفيفة",
                burn: "150–200",
                meals: { b: 300, l: 400, d: 900, note: "" },
                exercises: [
                    { name: "نط الحبل", reps: "5 جولات × 3 دقائق (15 دقيقة)", link: "https://www.youtube.com/watch?v=u3zgHI8QnqE", icon: "fa-wind", color: "text-cyan-500", bg: "bg-cyan-50" },
                    { name: "إطالات (Stretching)", reps: "كامل الجسم", link: "https://www.youtube.com/watch?v=g_tea8ZNk5A", icon: "fa-child", color: "text-pink-500", bg: "bg-pink-50" }
                ]
            },
            {
                day: "اليوم 5",
                burn: "250–300",
                meals: { b: 300, l: 450, d: 850, note: "" },
                exercises: [
                    { name: "نط الحبل", reps: "5 جولات × 30 ثانية", link: "https://www.youtube.com/watch?v=u3zgHI8QnqE", icon: "fa-wind", color: "text-cyan-500", bg: "bg-cyan-50" },
                    { name: "سكوات", reps: "4 جولات × 15 عدة", link: "https://www.youtube.com/watch?v=YaXPRqUwItQ", icon: "fa-person-running", color: "text-blue-500", bg: "bg-blue-50" },
                    { name: "لانجز", reps: "3 جولات × 12 عدة", link: "https://www.youtube.com/watch?v=QOVaHwm-Q6U", icon: "fa-walking", color: "text-indigo-500", bg: "bg-indigo-50" },
                    { name: "كرسي الحائط", reps: "دقيقة كاملة", link: "https://www.youtube.com/watch?v=-cdph8zf0j4", icon: "fa-chair", color: "text-purple-500", bg: "bg-purple-50" },
                    { name: "تسلق الجبل", reps: "3 جولات × 25 عدة", link: "https://www.youtube.com/watch?v=nmwgirgXLYM", icon: "fa-mountain", color: "text-orange-500", bg: "bg-orange-50" }
                ]
            },
            {
                day: "اليوم 6",
                burn: "250–320",
                meals: { b: 350, l: 400, d: 850, note: "" },
                exercises: [
                    { name: "نط الحبل", reps: "3 جولات × دقيقة", link: "https://www.youtube.com/watch?v=u3zgHI8QnqE", icon: "fa-wind", color: "text-cyan-500", bg: "bg-cyan-50" },
                    { name: "ضغط (Push-up)", reps: "تمرين كامل", link: "https://www.youtube.com/watch?v=IODxDxX7oi4", icon: "fa-hand-fist", color: "text-red-500", bg: "bg-red-50" },
                    { name: "سكوات", reps: "3 جولات × 15 عدة", link: "https://www.youtube.com/watch?v=YaXPRqUwItQ", icon: "fa-person-running", color: "text-blue-500", bg: "bg-blue-50" },
                    { name: "بلانك", reps: "دقيقة كاملة", link: "https://www.youtube.com/watch?v=pSHjTRCQxIw", icon: "fa-stopwatch", color: "text-emerald-500", bg: "bg-emerald-50" },
                    { name: "بيربيز", reps: "3 جولات × 8 عدات", link: "https://www.youtube.com/watch?v=auBLP0dSuy4", icon: "fa-fire", color: "text-orange-600", bg: "bg-orange-50" }
                ]
            },
            {
                day: "اليوم 7",
                subtitle: "راحة تامة",
                burn: "40–60",
                meals: { b: 300, l: 400, d: 900, note: "" },
                exercises: [
                    { name: "إطالات خفيفة", reps: "استرخاء", link: "https://www.youtube.com/watch?v=g_tea8ZNk5A", icon: "fa-spa", color: "text-teal-500", bg: "bg-teal-50" }
                ]
            }
        ];

        let activeIndex = 0;

        function init() {
            renderTabs();
            renderContent(0);
            setupEventListeners();
        }

        // --- Render Logic ---
        function renderTabs() {
            const container = document.querySelector('.tabs-container');
            container.innerHTML = '';

            workoutData.forEach((day, index) => {
                const isActive = index === activeIndex;
                const btn = document.createElement('button');
                btn.className = `tab-btn flex-shrink-0 px-6 py-3 rounded-2xl font-bold text-sm md:text-base snap-center ${isActive ? 'active' : 'inactive'}`;
                
                // Content
                const dayText = document.createElement('span');
                dayText.textContent = day.day;
                
                if (day.subtitle) {
                    const sub = document.createElement('span');
                    sub.className = 'block text-xs font-normal opacity-90 mt-1';
                    sub.textContent = day.subtitle;
                    btn.appendChild(dayText);
                    btn.appendChild(sub);
                } else {
                    btn.appendChild(dayText);
                }

                btn.onclick = () => {
                    activeIndex = index;
                    renderTabs();
                    renderContent(index);
                };
                container.appendChild(btn);
            });
        }

        function renderContent(index) {
            const data = workoutData[index];
            const contentDiv = document.getElementById('day-content');
            
            // Animation Reset
            contentDiv.classList.remove('fade-up');
            void contentDiv.offsetWidth; 
            contentDiv.classList.add('fade-up');

            // --- Stats Widget ---
            const statsWidget = `
                <div class="grid grid-cols-1 md:grid-cols-12 gap-6 mb-8">
                    <!-- Burn Card -->
                    <div class="md:col-span-4 bg-gradient-to-br from-orange-500 to-red-500 rounded-3xl p-6 text-white shadow-lg relative overflow-hidden group">
                        <div class="absolute top-0 right-0 p-4 opacity-10 transform rotate-12 group-hover:scale-110 transition-transform duration-500">
                            <i class="fa-solid fa-fire text-9xl"></i>
                        </div>
                        <div class="relative z-10">
                            <div class="flex items-center gap-2 mb-2 opacity-90">
                                <i class="fa-solid fa-chart-line"></i>
                                <span class="text-sm font-medium">معدل الحرق</span>
                            </div>
                            <h2 class="text-4xl font-bold mb-1">${data.burn}</h2>
                            <p class="text-orange-100 text-sm">سعر حراري متوقع</p>
                        </div>
                    </div>

                    <!-- Meals Card -->
                    <div class="md:col-span-8 bg-white rounded-3xl p-6 shadow-md border border-gray-100">
                        <h3 class="font-bold text-gray-800 mb-4 flex items-center gap-2">
                            <i class="fa-solid fa-utensils text-emerald-500"></i>
                            النظام الغذائي
                        </h3>
                        <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
                            <!-- Breakfast -->
                            <div class="bg-gray-50 rounded-2xl p-4 border border-gray-100 flex flex-col items-center text-center hover:bg-emerald-50 transition-colors cursor-default">
                                <i class="fa-solid fa-mug-hot text-yellow-500 text-2xl mb-2"></i>
                                <span class="text-sm text-gray-500 mb-1">الإفطار</span>
                                <span class="text-lg font-bold text-gray-800">${data.meals.b} <small>cal</small></span>
                            </div>
                            <!-- Lunch -->
                            <div class="bg-gray-50 rounded-2xl p-4 border border-gray-100 flex flex-col items-center text-center hover:bg-emerald-50 transition-colors cursor-default">
                                <i class="fa-solid fa-bowl-rice text-orange-500 text-2xl mb-2"></i>
                                <span class="text-sm text-gray-500 mb-1">الغداء</span>
                                <span class="text-lg font-bold text-gray-800">${data.meals.l} <small>cal</small></span>
                            </div>
                            <!-- Dinner -->
                            <div class="bg-gray-50 rounded-2xl p-4 border border-gray-100 flex flex-col items-center text-center hover:bg-emerald-50 transition-colors cursor-default relative">
                                ${data.meals.note ? `<span class="absolute top-2 left-2 w-2 h-2 rounded-full bg-red-500 animate-pulse"></span>` : ''}
                                <i class="fa-solid fa-drumstick-bite text-brown-500 text-2xl mb-2" style="color: #A52A2A"></i>
                                <span class="text-sm text-gray-500 mb-1">العشاء ${data.meals.note ? '<i class="fa-solid fa-circle-exclamation text-red-500 text-xs"></i>' : ''}</span>
                                <span class="text-lg font-bold text-gray-800">${data.meals.d} <small>cal</small></span>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            // --- Exercises List ---
            const exercisesHTML = data.exercises.map(ex => `
                <div class="bg-white rounded-2xl p-4 sm:p-5 shadow-sm border border-gray-100 hover:shadow-xl hover:-translate-y-1 transition-all duration-300 group">
                    <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4">
                        <!-- Icon & Text -->
                        <div class="flex items-center gap-4 w-full">
                            <div class="w-14 h-14 flex-shrink-0 rounded-2xl ${ex.bg} ${ex.color} flex items-center justify-center text-2xl shadow-inner">
                                <i class="fa-solid ${ex.icon}"></i>
                            </div>
                            <div class="flex-grow">
                                <h4 class="text-lg font-bold text-gray-800 group-hover:text-emerald-600 transition-colors line-clamp-1">${ex.name}</h4>
                                <div class="flex items-center gap-3 mt-1 text-sm text-gray-500">
                                    <span class="flex items-center gap-1 bg-gray-100 px-2 py-0.5 rounded-md">
                                        <i class="fa-solid fa-arrows-rotate text-xs"></i> ${ex.reps}
                                    </span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Action Button -->
                        <button onclick="openModal('${ex.link}', '${ex.name}')" class="w-full sm:w-auto px-6 py-3 rounded-xl bg-gray-900 text-white font-bold text-sm hover:bg-emerald-600 transition-colors flex items-center justify-center gap-2 shadow-lg shadow-gray-200">
                            <i class="fa-solid fa-play"></i>
                            <span class="sm:hidden">شاهد التمرين</span>
                        </button>
                    </div>
                </div>
            `).join('');

            contentDiv.innerHTML = `
                ${statsWidget}
                <div class="bg-gray-50/50 rounded-3xl p-6 border border-gray-200/50">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-xl font-bold text-gray-800 flex items-center gap-2">
                            <i class="fa-solid fa-list-check text-emerald-600"></i>
                            تمارين اليوم
                        </h3>
                        <span class="bg-white px-3 py-1 rounded-full text-xs font-bold text-gray-500 border shadow-sm">
                            ${data.exercises.length} تمرين
                        </span>
                    </div>
                    <div class="space-y-4">
                        ${exercisesHTML}
                    </div>
                </div>
            `;
        }

        // --- Video Modal System ---
        function getYouTubeID(url) {
            // تحسين دالة استخراج معرف الفيديو من YouTube
            const regExp = /^.*(youtu\.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/;
            const match = url.match(regExp);
            return (match && match[2].length === 11) ? match[2] : null;
        }

        function openModal(link, title) {
            const modal = document.getElementById('videoModal');
            const frame = document.getElementById('videoFrame');
            const label = document.getElementById('modalTitle');
            const fallback = document.getElementById('fallbackLink');
            
            const videoId = getYouTubeID(link);
            
            label.textContent = title;
            fallback.href = link;

            if (videoId) {
                // Using modestbranding and rel=0 for cleaner look
                frame.src = `https://www.youtube.com/embed/${videoId}?autoplay=1&rel=0&modestbranding=1&playsinline=1`;
            } else {
                // Should technically not happen with provided data, but good for safety
                frame.src = "";
                window.open(link, '_blank');
                return;
            }

            modal.classList.add('open');
        }

        function closeModal() {
            const modal = document.getElementById('videoModal');
            const frame = document.getElementById('videoFrame');
            
            modal.classList.remove('open');
            setTimeout(() => {
                frame.src = ""; // Stop video
            }, 300);
        }

        // Setup Event Listeners
        function setupEventListeners() {
            // Modal close button
            document.getElementById('closeModalBtn').addEventListener('click', closeModal);
            
            // Close modal when clicking outside
            document.getElementById('videoModal').addEventListener('click', (e) => {
                if(e.target.id === 'videoModal') closeModal();
            });

            // Close modal with Escape key
            document.addEventListener('keydown', (e) => {
                if(e.key === 'Escape') closeModal();
            });
        }

        // Start
        init();
    </script>
</body>
</html>
